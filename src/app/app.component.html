<div class="page-wrapper">
  <div class="left-panel">
    <h1>{{ infoContent ? 'Location Details' : 'Explore a Place' }}</h1>

    <div class="search-container">
      <input
        #searchInput
        id="autocomplete"
        type="text"
        placeholder="Search for a city or address"
        class="search-box"
      />
    </div>

    <div *ngIf="infoContent" class="place-details">
      <div class="image-section-container">
        <div class="image-section">
          <img
            *ngFor="let url of photoUrls"
            [src]="url"
            alt="Image of {{ formattedInfo }}"
            onerror="this.onerror=null;this.src='https://source.unsplash.com/600x400/?activity'"
          />
        </div>
      </div>

      <div class="info-section">
        <h2>Selected Location</h2>
        <p [innerHTML]="infoContent"></p>
      </div>

      <div *ngIf="nearbyActivities.length" class="activities-card">
        <h2>Fun Things to Do Nearby</h2>

        <ul class="activities-list">
          <li *ngFor="let activity of nearbyActivities" class="activity-item">
            <strong>{{ activity.name }}</strong>

            <span *ngIf="activity.rating && activity.rating !== 'N/A'">
              — ★ {{ activity.rating }}
            </span>

            <br />
            <small>{{ activity.vicinity }}</small>
          </li>
        </ul>
      </div>
    </div>

    <p *ngIf="!infoContent" style="margin-top: 2rem; color: #8b949e">
      Use the search bar above or click on the map to explore a location!
    </p>
  </div>

  <div class="right-panel">
    <google-map
      height="100%"
      width="100%"
      [center]="center"
      [zoom]="zoom"
      (mapClick)="onMapClick($event)"
    >
      <map-marker
        *ngIf="markerPosition"
        [position]="markerPosition"
        [options]="markerOptions"
      ></map-marker>

      <map-info-window>{{ infoWindowContent }}</map-info-window>
    </google-map>
  </div>
</div>
